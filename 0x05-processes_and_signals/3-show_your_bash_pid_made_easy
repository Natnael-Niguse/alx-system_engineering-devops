#!/usr/bin/env bash

# Get the PID of the current script
script_pid=$$

# Get the PIDs of processes whose names contain the word "bash" and exclude the script's PID
pids=$(find /proc -maxdepth 1 -type d -name '[0-9]*' -exec grep -qs "bash" {}/comm \; -print 2>/dev/null | grep -v "$script_pid")

# Display the PID and process name of each running bash process
for pid in $pids; do
    # Extract just the numeric part of the path to get the PID
    pid=$(basename "$pid")

    # Check if the /proc/PID/comm file exists before reading from it
    if [ -f "/proc/$pid/comm" ]; then
        process_name=$(< "/proc/$pid/comm")
        echo "$pid $process_name"
    fi
done
